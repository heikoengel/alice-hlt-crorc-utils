CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(crorc-utils)
SET(VERSION "1.0.0")
SET(CPACK_RPM_PACKAGE_RELEASE 2)

SET(CMAKE_INSTALL_PREFIX /usr)
MESSAGE( STATUS "Install directory   = ${CMAKE_INSTALL_PREFIX}")

# Find librorc.so
FIND_LIBRARY(LIBRORC NAME rorc PATHS
  /mnt/data/projects/alice-hlt-librorc/build/release/src)
IF(LIBRORC)
  MESSAGE(STATUS "Found librorc: ${LIBRORC}")
ELSE(LIBRORC)
  MESSAGE(FATAL_ERROR "Could not locate librorc")
ENDIF(LIBRORC)
INCLUDE_DIRECTORIES(/mnt/data/projects/alice-hlt-librorc/include)

# add actual code
ADD_SUBDIRECTORY(src)

# add helper scripts
ADD_SUBDIRECTORY(scripts)

# CPack
SET(CPACK_PACKAGE_VERSION ${VERSION})
SET(CPACK_GENERATOR "RPM")
SET(CPACK_PACKAGE_NAME "crorc-utils")
SET(CPACK_RPM_PACKAGE_LICENSE "BSD")
SET(CPACK_RPM_PACKAGE_GROUP "System Environment/Base")
SET(CPACK_PACKAGE_CONTACT "Heiko Engel <hengel@cern.ch>")
SET(CPACK_PACKAGE_VENDOR "CERN")
SET(CPACK_PACKAGING_INSTALL_PREFIX ${CMAKE_INSTALL_PREFIX})
SET(CPACK_PACKAGE_FILE_NAME
  "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION}-${CPACK_RPM_PACKAGE_RELEASE}.${CMAKE_SYSTEM_PROCESSOR}")
INCLUDE(CPack)
